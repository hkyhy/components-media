/*! For license information please see 99.f0c78457.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunk_hkyhy_components_media=self.webpackChunk_hkyhy_components_media||[]).push([[99,116,379,909],{5909:(e,t,n)=>{n.r(t),n.d(t,{AudioPlayerButton:()=>S,AudioPlayerRender:()=>O,AudioRecordButton:()=>h,AudioRecordRender:()=>f,useAudioPlayer:()=>g,useAudioRecord:()=>m,withAudioPlayer:()=>w,withAudioRecord:()=>y});var r=n(9379),o=n(3986),a=n(3884),c=n(5199),s=n(1400),u=n(3050),i=n(579);const l=["onComplete","onData","onStart"],d=["children"],p=["remoteModules","recording","children","start","stop"],m=e=>{const{onComplete:t,onData:n,onStart:r}=Object.assign({},e),[o,u]=(0,a.useState)(!1),i=(0,a.useRef)([]),{message:l}=c.App.useApp(),d=(0,s.A)(t),p=(0,s.A)(n),m=(0,s.A)(r),y=(0,s.A)((async()=>{const e=await window.navigator.mediaDevices.getUserMedia({audio:!0}).catch((e=>{throw l.error("\u51fa\u9519\uff0c\u8bf7\u786e\u4fdd\u5df2\u5141\u8bb8\u6d4f\u89c8\u5668\u83b7\u53d6\u5f55\u97f3\u6743\u9650"),e})),t=new window.MediaRecorder(e);i.current={stream:e,recorder:t};const n=[["start",()=>{i.current.chunks=[],m({stream:e,recorder:t})}],["dataavailable",e=>{p(e.data),i.current.chunks.push(e.data)}]];return i.current.events=n,n.forEach((e=>{let[n,r]=e;return t.addEventListener(n,r)})),t.start(1e3),u(!0),{stream:e,recorder:t}})),f=(0,s.A)((async e=>{if(!e&&u(!1),!i.current)return[];const{events:t,recorder:n,stream:r,chunks:o}=i.current;return t.forEach((e=>{let[t,r]=e;return n.removeEventListener(t,r)})),r.getTracks().forEach((e=>e.stop())),i.current=null,await d(o),o})),h=(0,s.A)((async()=>{o?await f():await y()}));return{recording:o,start:y,stop:f,change:h}},y=e=>t=>{let{onComplete:n,onData:a,onStart:c}=t,s=(0,o.A)(t,l);const{recording:u,start:d,stop:p,change:y}=m({onComplete:n,onData:a,onStart:c});return(0,i.jsx)(e,(0,r.A)((0,r.A)({},s),{},{recording:u,start:d,stop:p,onClick:y}))},f=e=>{let{children:t}=e;return t((0,o.A)(e,d))},h=y((0,u.createWithRemoteLoader)({modules:["components-core:LoadingButton"]})((e=>{let{remoteModules:t,recording:n,children:a,start:c,stop:s}=e,u=(0,o.A)(e,p);const[l]=t;return(0,i.jsx)(l,(0,r.A)((0,r.A)({},u),{},{children:a?a(n):n?"\u6b63\u5728\u5f55\u5236":"\u70b9\u51fb\u5f00\u59cb"}))}))),b=["src"],A=["children"],v=["playing"],g=e=>{let{src:t}=e;const[n,r]=(0,a.useState)(!1),o=(0,a.useMemo)((()=>{if(t)return new Audio(t instanceof Blob?URL.createObjectURL(t):t)}),[t]);return(0,a.useEffect)((()=>(o.addEventListener("ended",(()=>{r(!1)})),()=>{t instanceof Blob&&URL.revokeObjectURL(o.src)})),[o,t]),{playing:n,play:async()=>{o.currentTime=0,await o.play(),r(!0)},pause:()=>{o.pause(),r(!1)},getDuration:async()=>o.duration?1e3*o.duration:new Promise(((e,t)=>{o.addEventListener("loadedmetadata",(()=>{e()})),o.addEventListener("error",(e=>{t(e)}))}))}},w=e=>t=>{let{src:n}=t,a=(0,o.A)(t,b);const{playing:c,play:s,pause:u}=g({src:n});return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(e,(0,r.A)((0,r.A)({},a),{},{playing:c,onClick:()=>{c?u():s()}}))})},O=w((e=>{let{children:t}=e;return t((0,o.A)(e,A))})),S=w((e=>{let{playing:t}=e,n=(0,o.A)(e,v);return(0,i.jsx)(c.Button,(0,r.A)((0,r.A)({},n),{},{children:t?"\u6b63\u5728\u64ad\u653e...":"\u70b9\u51fb\u64ad\u653e"}))}))},1400:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(3884);const o=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=(0,r.useRef)(e);return t||(n.current=e),(0,r.useCallback)((function(){return n.current&&n.current(...arguments)}),[])}},1153:(e,t,n)=>{var r=n(3884),o=Symbol.for("react.element"),a=Symbol.for("react.fragment"),c=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function i(e,t,n){var r,a={},i=null,l=null;for(r in void 0!==n&&(i=""+n),void 0!==t.key&&(i=""+t.key),void 0!==t.ref&&(l=t.ref),t)c.call(t,r)&&!u.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:o,type:e,key:i,ref:l,props:a,_owner:s.current}}t.Fragment=a,t.jsx=i},579:(e,t,n)=>{e.exports=n(1153)},7099:(e,t,n)=>{n.r(t),n.d(t,{default:()=>r,manifest:()=>o});const r={Speech:{name:"Speech",summary:"<p>\u7528\u6237\u5904\u7406\u8bed\u97f3\u8bc6\u522b\u3001\u8bed\u97f3\u8f6c\u6587\u5b57\u7b49\uff0c\u5bf9\u63a5\u963f\u91cc\u7684\u667a\u80fd\u8bed\u97f3\u4ea4\u4e92\u670d\u52a1</p>",api:"<table>\n<thead>\n<tr>\n<th>\u5c5e\u6027\u540d</th>\n<th>\u8bf4\u660e</th>\n<th>\u7c7b\u578b</th>\n<th>\u9ed8\u8ba4\u503c</th>\n</tr>\n</thead>\n</table>",example:{isFull:!1,className:"Speech_04a83",style:"",list:[{title:"\u8fd9\u91cc\u586b\u5199\u793a\u4f8b\u6807\u9898",description:"\u8fd9\u91cc\u586b\u5199\u793a\u4f8b\u8bf4\u660e",code:"const { AudioRecordButton, AudioPlayerButton, useAudioPlayer } = _Speech;\nconst { useState } = React;\nconst { Button } = antd;\n\nconst DurationButton = ({ src }) => {\n  const { getDuration } = useAudioPlayer({ src });\n  return (\n    <Button\n      onClick={() => {\n        getDuration().then(time => console.log(time));\n      }}\n    >\n      \u83b7\u53d6\u65f6\u957f\n    </Button>\n  );\n};\n\nconst BaseExample = () => {\n  const [record, setRecord] = useState(null);\n  return (\n    <>\n      <AudioRecordButton\n        onStart={() => {\n          setRecord(null);\n        }}\n        onComplete={chunks => {\n          setRecord(new Blob(chunks, { type: chunks[0].type }));\n        }}\n      />\n      {record && (\n        <>\n          <AudioPlayerButton src={record} />\n          <DurationButton src={record} />\n        </>\n      )}\n    </>\n  );\n};\n\nrender(<BaseExample />);\n\n",scope:[{name:"_Speech",packageName:"@components/Speech",component:n(5909)},{name:"antd",packageName:"antd",component:n(5199)}]}]}}},o={name:"components-media",version:"0.1.2","open-version":!0,"public-url":"/",modules:[{name:"Speech",baseDir:"/home/runner/work/components-media/components-media/src/components/Speech"}]}},4467:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(816);function o(e,t,n){return(t=(0,r.A)(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},9379:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(4467);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},3986:(e,t,n)=>{function r(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}n.d(t,{A:()=>r})},816:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(2284);function o(e){var t=function(e,t){if("object"!=(0,r.A)(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=(0,r.A)(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==(0,r.A)(t)?t:t+""}},2284:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{A:()=>r})}}]);
//# sourceMappingURL=99.f0c78457.chunk.js.map